<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
 <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
  <script src="js/leaflet.groupedlayercontrol.js" type="text/javascript"></script>
 
<!-- Layers To Load --> 
 <!-- BARBOUR --> <script src="js/BD.js" type="text/javascript"></script>
 <!-- TOBIAS --> <script src="js/TD_display.js" type="text/javascript"></script>
 <!-- PURER --> <script src="js/PD.js" type="text/javascript"></script>
 <!-- COOPER --> 
 <script src="js/C_AbLa.js" type="text/javascript"></script> 
 <script src="js/C_AbMa.js" type="text/javascript"></script> 
 <script src="js/C_AbUm.js" type="text/javascript"></script> 
 <script src="js/C_AmCh.js" type="text/javascript"></script> 
 <script src="js/C_ArPy.js" type="text/javascript"></script> 
 <script src="js/C_AtLe.js" type="text/javascript"></script> 
 <script src="js/C_CaChe.js" type="text/javascript"></script>
 <script src="js/C_CaChi.js" type="text/javascript"></script> 
 <script src="js/C_CaEd.js" type="text/javascript"></script> 
 <script src="js/C_CaSo.js" type="text/javascript"></script> 
 <script src="js/C_ElMo.js" type="text/javascript"></script> 
 <script src="js/C_GlLi.js" type="text/javascript"></script> 
 <script src="js/C_LaLi.js" type="text/javascript"></script> 


<style>
#map { height: 650px; width: 260px; margin-right: 5px; }
#map2 { height: 650px; width: 260px; margin-right: 5px;}
#map3 { height: 650px; width: 260px;}
#attribution {
  font: 12px/1.5 Lato, "Helvetica Neue", Helvetica, Arial, sans-serif;
  color: #555;}

td {
     text-align: center;
     font-weight: bold;
}



</style>

<title>CA Beach Vegetation Map</title>

</head>

<body>

<div class="wrapper">

<header>
    <img src="images/Logo_Squares_500x488px.png" alt="Tobias Research Logo" style="float:left; padding: 10px; width:100px;height:100px">
    <h1>California Beach Plant</h1> 
    <h1>Species Distributions</h1>
    <p>Michele M. Tobias, PhD</p>
    <p>University of California, Davis</p>
    <p>mmtobias[at]ucdavis.edu</p>
    
    <p class="view"><a href="https://github.com/MicheleTobias/maps">View the Project on GitHub <small>MicheleTobias/maps</small></a></p>
        <ul>
          <li><a href="https://github.com/MicheleTobias/maps">Project On <strong>GitHub</strong></a></li>
          <li><a href="https://sites.google.com/site/mtobiasresearch/">Research <strong>Website</strong></a></li>
        </ul>
        
</header>

<section>
<h3>Introduction</h3>
<p>The distribution of species can change over time.  This map shows the locations of common beach plant species described in studies published in the academic literature at three different points in time: 1936, 1974, and 2012.  The support (point or aerial representation) is based on the description by the original author. </p>
</section>

<section>
<h3>About the Maps</h3>
<h4>Locations</h4>
<p>The point locations on all the maps are digitized from information supplied in published papers.  Cooper's (1936) locations were digitized from georeferenced scanned maps published in his paper.  Because of this, the locations are presence-only observations.  Each point that appears in any species' distribution is a place where the species was observed; there are no locations marked where the species was not seen.  The other locations - from Purer (1936), Barbour et al. (1974), and Tobias (2012) - all display presence-absence data.  In these papers, it was clear which locations each author visited and which species were found at these locations.  For these data, colored markers represent locations where the species was seen and white markers represent locations without the species.</p>

<h4>Selecting Layers</h4>
<p>Changing the species in one map does not automatically change the species distributions in the other maps (yet), nor is panning and zooming linked between the maps (yet).  Please be patient with the navigations and layer selection and make your selections carefully.</p>
<p>The 1936 map has distributions from two different studies.  I recommend showing only one layer from each section at a time.  Since the points and polygons are the same for each species in each group, the most recently selected layer will block any previously selected layer.  </p>
</section>

<section>
<!--Info on making 3 divs next to e/o: http://stackoverflow.com/questions/20179154/html-and-css-how-can-i-align-3-divs-side-by-side -->

<table style="width:100%">
    <tr> 
        <td>1936</td>
        <td>1974</td>
        <td>2012</td>
    </tr>
</table>

<p class = "view">
<div id="map" style="float:left"></div> <!-- ***PURER & COOPER *** -->

<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="js/leaflet.groupedlayercontrol.js"></script>
<script type="text/javascript">

// set the display colors for the point overlays
function getColor(d) {
    return d > 0 ? '#e6550d':
                   '#e6f5c9';
}

// set the display colors for the polygon overlays
function getColorPoly(d) {
    return d > 0 ? '#a6d854': //'#d01c8b' :
                   '#e6f5c9';
}

// *** COOPER DISTRIBUTIONS ***

// ABRONIA LATIFOLIA 
var abronia_l = new L.LayerGroup();

L.geoJson(C_AbLa, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(abronia_l);

// ABRONIA MARITIMA 
var abronia_m = new L.LayerGroup();

L.geoJson(C_AbMa, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(abronia_m);

// ABRONIA UMBELLATA
var abronia_u = new L.LayerGroup();

L.geoJson(C_AbUm, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(abronia_u);

// AMBROSIA CHAMISSONIS
var ambrosia = new L.LayerGroup();

L.geoJson(C_AmCh, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(ambrosia);

// ARTEMISIA PYCNOCEPHALA
var artemisia = new L.LayerGroup();

L.geoJson(C_ArPy, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(artemisia);

// ATRIPLEX LEUCOPHYLLA
var atriplex_l = new L.LayerGroup();

L.geoJson(C_AtLe, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(atriplex_l);


// CAKILE EDENTULA
var cakile = new L.LayerGroup();

L.geoJson(C_CaEd, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(cakile);

// CALYSTEGIA SOLDANELLA
var calystegia = new L.LayerGroup();

L.geoJson(C_CaSo, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(calystegia);

// CAMISSONIA CHEIRANTHIFOLIA
var camissonia = new L.LayerGroup();

L.geoJson(C_CaChe, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(camissonia);

// CARPOBROTUS SPP.
var carpobrotus = new L.LayerGroup();

L.geoJson(C_CaChi, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(carpobrotus);

// GLEHNIA LITTORALIS
var glehnia = new L.LayerGroup();

L.geoJson(C_GlLi, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(glehnia);

// LATHYRUS LITTORALIS
var lathyrus = new L.LayerGroup();

L.geoJson(C_LaLi, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(lathyrus);

// ELYMUS MOLLIS
var leymus = new L.LayerGroup();

L.geoJson(C_ElMo, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: '#e6550d',
            fillOpacity: 1
            });
    }
}).addTo(leymus);


// ---------------------------
// ---------------------------
// ***PURER'S DISTRIBUTIONS***

// ABRONIA MARITIMA
var pAbroniaM = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ABRONIAMAR),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAbroniaM);

// ABRONIA UMBELLATA
var pAbroniaU = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ABRONIAUMBE),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAbroniaU);

// AMBROSIA CHAMISSONIS
var pAmbrosia = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.AMBROSIACH),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAmbrosia);

// ATRIPLEX LEUCOPHYLLA
var pAtriplex = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ATRIPLEXLE),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAtriplex);

// CALYSTEGIA SOLDANELLA
var pCalystegia = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.CALYSTEGIA),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pCalystegia);
    
//CARPOBROTUS SPP.
var pCarpobrotus = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.CARPOBROTU),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pCarpobrotus);


 
// Add the Base Layers (tiles)
var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
var watercolor = L.tileLayer('http://b.tile.stamen.com/watercolor/{z}/{x}/{y}.png');

// make the map
var map = L.map('map', {
    center:[37, -119.5], 
    zoom: 5,
    layers: [watercolor, pAmbrosia, ambrosia]
    });

var baseLayers = {
"OSM": osm,
"Watercolor": watercolor
};


/*
var overlays = {
//"Markers": marker,
"Atriplex leucophylla": atriplex_l,
"Cakile maritima": cakile 
}; */
   
// add the overlays and put them in groups
var groupedOverlays = {
    "1936 Distributions (Purer)": {
        "Abronia maritima": pAbroniaM,
        "Abronia umbellata": pAbroniaU,
        "Ambrosia chamissonis": pAmbrosia,
        "Atriplex leucophylla": pAtriplex,
        "Calystegia soldanella": pCalystegia,
        "Carpobrotus spp.": pCarpobrotus
        },
    "1936 Distributions (Cooper)": {
        "Abronia latifolia": abronia_l,
        "Abronia maritima": abronia_m,
        "Abronia umbellata": abronia_u,
        "Ambrosia chamissonis": ambrosia,
        "Atriplex leucophylla": atriplex_l,
        "Artemisia pycnocephalla": artemisia,
        "Calystegia soldanella": calystegia,
        "Cakile maritima": cakile,
        "Camissoniopsis cheiranthifolia": camissonia,
        "Carpobrotus spp.": carpobrotus,
        "Glehnia littoralis": glehnia,
        "Lathyrus littoralis": lathyrus,
        "Elymus mollis": leymus 
        }
    };

/*L.control.layers(baseLayers, overlays, {
    collapsed: false
    }).addTo(map); */

var options = {
    collapsed: true,
    exclusiveGroups: ["1936 Distributions (Cooper)", "1936 Distributions (Purer)"] 
    };
    

var layerControl = L.control.groupedLayers(baseLayers, groupedOverlays, options).addTo(map);
    
//map.addControl(layerControl);

</script>

<div id="map2" style="float:left"></div> <!-- *** BARBOUR *** -->
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="js/leaflet.groupedlayercontrol.js"></script>
<script type="text/javascript">
// set the display colors for the point overlays
function getColor(d) {
    return d > 0 ? '#e6550d':
                   '#e6f5c9';
}

// set the display colors for the polygon overlays
function getColorPoly(d) {
    return d > 0 ? '#a6d854': //'#d01c8b' :
                   '#e6f5c9';
}

// *** BARBOUR DISTRIBUTIONS ***

// ABRONIA LATIFOLIA "ABRONIA_LA" 
var abronia_l = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_AbLa),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(abronia_l);

// ABRONIA MARITIMA "ABRONIA_MA"
var abronia_m = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_AbMa),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(abronia_m);

// AMBROSIA CHAMISSONIS
var ambrosia = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_AmCh),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(ambrosia);


// ATRIPLEX LEUCOPHYLLA
var atriplex_l = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_AtLe),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(atriplex_l);

// CAKILE EDENTULA
var cakile_e = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_CaEd),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(cakile_e);

// CAKILE MARITIMA
var cakile = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_CaMa),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(cakile);

// CALYSTEGIA SOLDANELLA
var calystegia = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_CaSo),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(calystegia);

// CAMISSONIA CHEIRANTHIFOLIA "CAMISSONIA"
var camissonia = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_CaCh),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(camissonia);

// CARPOBROTUS SPP. "CARPOBROTU"
var carpobrotus = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_MeCh),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(carpobrotus);

// LATHYRUS LITTORALIS "LATHYRUS_L"
var lathyrus = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_LaLi),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(lathyrus);

// LEYMUS MOLLIS "LEYMUS_MOL"
var leymus = new L.LayerGroup();

L.geoJson(BD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.Barbour_Attributes_ElMo),
            fillOpacity: 1
            }).bindPopup(feature.properties.Descriptio);
    }
}).addTo(leymus);

 
// Add the Base Layers (tiles)
var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
var watercolor = L.tileLayer('http://b.tile.stamen.com/watercolor/{z}/{x}/{y}.png');

// make the map
var map = L.map('map2', {
    center:[37, -119.5], 
    zoom: 5,
    layers: [watercolor, ambrosia]
    });

var baseLayers = {
"OSM": osm,
"Watercolor": watercolor
};


/*
var overlays = {
//"Markers": marker,
"Atriplex leucophylla": atriplex_l,
"Cakile maritima": cakile 
}; */
   
// add the overlays and put them in groups
var groupedOverlays = {
    "1976 Distributions": {
        "Abronia latifolia": abronia_l,
        "Abronia maritima": abronia_m,
        "Ambrosia chamissonis": ambrosia,
        "Atriplex leucophylla": atriplex_l,
        "Calystegia soldanella": calystegia,
        "Cakile edentual": cakile_e,
        "Cakile maritima": cakile,
        "Camissoniopsis cheiranthifolia": camissonia,
        "Carpobrotus spp.": carpobrotus,
        "Lathyrus littoralis": lathyrus,
        "Elymus mollis": leymus /*,
        "Tetragonia tetrogonoides": tetragonia */
        }
    };

/*L.control.layers(baseLayers, overlays, {
    collapsed: false
    }).addTo(map); */

var options = {
    collapsed: true,
    exclusiveGroups: ["1976 Distributions"] 
    };
    

var layerControl = L.control.groupedLayers(baseLayers, groupedOverlays, options).addTo(map);
    
//map.addControl(layerControl);
</script>
<div id="map3"></div>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="js/leaflet.groupedlayercontrol.js"></script>
<script type="text/javascript">
// set the display colors for the point overlays
function getColor(d) {
    return d > 0 ? '#e6550d':
                   '#e6f5c9';
}

// set the display colors for the polygon overlays
function getColorPoly(d) {
    return d > 0 ? '#a6d854': //'#d01c8b' :
                   '#e6f5c9';
}


// *** TOBIAS DISTRIBUTIONS ***

// ABRONIA LATIFOLIA "ABRONIA_LA" 
var abronia_l = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ABRONIA_LA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(abronia_l);

// ABRONIA MARITIMA "ABRONIA_MA"
var abronia_m = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ABRONIA_MA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(abronia_m);

// ABRONIA UMBELLATA "ABRONIA_UM"
var abronia_u = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ABRONIA_UM),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(abronia_u);

// AMBROSIA CHAMISSONIS
var ambrosia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.AMBROSIA_C),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(ambrosia);
    
// AMMOPHILA ARENARIA "AMMOPHILA_"
// hold off on this one - observations not representative of actual distribution

// ARTEMISIA PYCNOCEPHALA "ARTEMISIA_"
var artemisia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ARTEMISIA_),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(artemisia);

// ATRIPLEX LEUCOPHYLLA
var atriplex_l = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ATRIPLEX_L),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(atriplex_l);

// CAKILE MARITIMA
var cakile = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CAKILE_MAR),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(cakile);

// CALYSTEGIA SOLDANELLA
var calystegia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CALYSTEGIA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(calystegia);

// CAMISSONIA CHEIRANTHIFOLIA "CAMISSONIA"
var camissonia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CAMISSONIA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(camissonia);

// CARPOBROTUS SPP. "CARPOBROTU"
var carpobrotus = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CARPOBROTU),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(carpobrotus);

// CROTON CALIFORNICUS "CROTON_CAL"
var croton = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CROTON_CAL),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(croton);

// DISTICHLIS SPICATA "DISTICHLIS"  
// hold off on this one?

// GLEHNIA LITTORALIS "GLEHNIA_LI"
var glehnia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.GLEHNIA_LI),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(glehnia);

// HELIOTROPIUM CURASSIVICUM "HELIOTROPI"
var heliotropium = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.HELIOTROPI),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(heliotropium);

// LATHYRUS LITTORALIS "LATHYRUS_L"
var lathyrus = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.LATHYRUS_L),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(lathyrus);

// LEYMUS MOLLIS "LEYMUS_MOL"
var leymus = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.LEYMUS_MOL),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(leymus);

/*
// TETRAGONIA TETROGONOIDES "TETRAGONIA"
var tetragonia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.TETRAGONIA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(tetragonia);
*/

 
// Add the Base Layers (tiles)
var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
var watercolor = L.tileLayer('http://b.tile.stamen.com/watercolor/{z}/{x}/{y}.png');

// make the map
var map = L.map('map3', {
    center:[37, -119.5], 
    zoom: 5,
    layers: [watercolor, ambrosia]
    });

var baseLayers = {
"OSM": osm,
"Watercolor": watercolor
};


/*
var overlays = {
//"Markers": marker,
"Atriplex leucophylla": atriplex_l,
"Cakile maritima": cakile 
}; */
   
// add the overlays and put them in groups
var groupedOverlays = {
    "2012 Distributions": {
        "Abronia latifolia": abronia_l,
        "Abronia maritima": abronia_m,
        "Abronia umbellata": abronia_u,
        "Ambrosia chamissonis": ambrosia,
        "Atriplex leucophylla": atriplex_l,
        "Artemisia pycnocephalla": artemisia,
        "Calystegia soldanella": calystegia,
        "Cakile maritima": cakile,
        "Camissoniopsis cheiranthifolia": camissonia,
        "Carpobrotus spp.": carpobrotus,
        "Croton californicus": croton,
        "Glehnia littoralis": glehnia,
        "Heliotropium curassivicum": heliotropium,
        "Lathyrus littoralis": lathyrus,
        "Elymus mollis": leymus /*,
        "Tetragonia tetrogonoides": tetragonia */
        }
    };

/*L.control.layers(baseLayers, overlays, {
    collapsed: false
    }).addTo(map); */

var options = {
    collapsed: true,
    exclusiveGroups: ["2012 Distributions"] 
    };
    

var layerControl = L.control.groupedLayers(baseLayers, groupedOverlays, options).addTo(map);
    
//map.addControl(layerControl);
</script>
</p>

<p id="attribution">Watercolor Tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.  OSM Tiles by <a href="http://www.openstreetmap.org">Open Street Map</a> under <a href="http://creativecommons.org/licenses/by-sa/2.0/">  Creative Commons Attribution-ShareAlike 2.0 license (CC BY-SA). </a>Data by <a href="http://opendatacommons.org/licenses/odbl/"> Open Data Commons Open Database License (ODbL)</a>. </p>

</section>

<section>
    <h3>References</h3>
    <p id="citation">Barbour, M. G., de Jong, T. M., & Johnson, A. F. 1976. Synecology of beach vegetation along the Pacific Coast of the United States of America: A first approximation. <i>Journal of Biogeography</i>. 3: 55-69. </p>
    <p id="citation">Cooper, W. S. 1936. The strand and dune Flora of the Pacific Coast of North America: A geographic study. In T. H. Goodspeed (Ed.), <i>Essays in geobotany in honor of William Albert Setchell</i> (pp. 141-187). Berkeley, CA: University of California Press.</p>
    <p id="citation">Purer, E.A.  1936.  Studies of certain coastal sand dune plants of Southern California.  <i>Ecological Monorgaphs</i>. 6(1):1-87. </p>
    <p id="citation">Tobias, M.M.  2012.  <i>California Beach Plant Biogeography: Biogeomorphology and Ecological Succession, Effects of Foot-Traffic Concentration, and Low-Altitude Aerial Photography.</i>  Dissertation.  University of California, Davis.  </p>
    

</section>
</body>
</html>