<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
 <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
  <script src="js/leaflet.groupedlayercontrol.js" type="text/javascript"></script>
 
<!-- Layers To Load --> 
 <script src="js/TD_display.js" type="text/javascript"></script>
 <script src="js/PD.js" type="text/javascript"></script>


 
 
<style>
#map { height: 600px; }


</style>

<title>CA Beach Vegetation Map</title>

</head>

<body>

<div class="wrapper">

<header>
    <img src="images/Logo_Squares_500x488px.png" alt="Tobias Research Logo" style="float:left; padding: 10px; width:100px;height:100px">
    <h1>California Beach Plant</h1> 
    <h1>Species Distributions</h1>
    <p>Distribution information is based on field work described in Tobias 2012 and Purer 1936</p>
    
    <p class="view"><a href="https://github.com/MicheleTobias/maps">View the Project on GitHub <small>MicheleTobias/maps</small></a></p>
        <ul>
          <li><a href="https://github.com/MicheleTobias/maps">Project On <strong>GitHub</strong></a></li>
          <li><a href="https://sites.google.com/site/mtobiasresearch/">Research <strong>Website</strong></a></li>
        </ul>
        
</header>

<section>
<h3>Introduction</h3>
<p>The distribution of species can change over time.  This map shows the locations of common beach plant species described in studies published in the academic literature.  The support (point or aerial representation) is based on the description by the original author. </p>
</section>

<section>
<div id="map"></div>
 
<script type="text/javascript">

// set the display colors for the point overlays
function getColor(d) {
    return d > 0 ? '#e6550d':
                   '#e6f5c9';
}

// set the display colors for the polygon overlays
function getColorPoly(d) {
    return d > 0 ? '#a6d854': //'#d01c8b' :
                   '#e6f5c9';
}

// make the map
var map = L.map('map', {
    center:[37, -119.5], 
    zoom: 6
    });

// *** TOBIAS DISTRIBUTIONS ***



// ABRONIA LATIFOLIA "ABRONIA_LA" 

// ABRONIA MARITIMA "ABRONIA_MA"

// ABRONIA UMBELLATA "ABRONIA_UM"

// AMBROSIA CHAMISSONIS
var ambrosia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.AMBROSIA_C),
            fillOpacity: 1
            });
    }
}).addTo(ambrosia);
    
// AMMOPHILA ARENARIA "AMMOPHILA_"

// ARTEMISIA PYCNOCEPHALA "ARTEMISIA_"

// ATRIPLEX LEUCOPHYLLA
var atriplex_l = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ATRIPLEX_L),
            fillOpacity: 1
            });
    }
}).addTo(atriplex_l);

// CALYSTEGIA SOLDANELLA
var calystegia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CALYSTEGIA),
            fillOpacity: 1
            });
    }
}).addTo(calystegia);

// CAKILE MARITIMA
var cakile = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CAKILE_MAR),
            fillOpacity: 1
            });
    }
}).addTo(cakile);

// CAMISSONIA CHEIRANTHIFOLIA "CAMISSONIA"

// ***PURER'S DISTRIBUTIONS***

// ABRONIA MARITIMA
var pAbroniaM = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ABRONIAMAR),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAbroniaM);

// ABRONIA UMBELLATA
var pAbroniaU = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ABRONIAUMBE),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAbroniaU);

// AMBROSIA CHAMISSONIS
var pAmbrosia = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.AMBROSIACH),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAmbrosia);

// ATRIPLEX LEUCOPHYLLA
var pAtriplex = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ATRIPLEXLE),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAtriplex);

// CALYSTEGIA SOLDANELLA
var pCalystegia = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.CALYSTEGIA),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pCalystegia);
    
//CARPOBROTUS SPP.
var pCarpobrotus = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.CARPOBROTU),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pCarpobrotus);

// CROTON CALIFORNICUS "CROTON_CAL"

// DISTICHLIS SPICATA "DISTICHLIS"  --> hold off on this one?

// GLEHNIA LITTORALIS "GLEHNIA_LI"

// HELIOTROPIUM CURASSIVICUM "HELIOTROPI"

// LATHYRUS LITTORALIS "LATHYRUS_L"

// LEYMUS MOLLIS "LEYMUS_MOL"

// TETRAGONIA TETROGONOIDES "TETRAGONIA"
 
// Add the Base Layers (tiles)
var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);
var watercolor = L.tileLayer('http://b.tile.stamen.com/watercolor/{z}/{x}/{y}.png').addTo(map);

var baseLayers = {
"OSM": osm,
"Watercolor": watercolor
};

/*
var overlays = {
//"Markers": marker,
"Atriplex leucophylla": atriplex_l,
"Cakile maritima": cakile 
}; */

// add the overlays and put them in groups
var groupedOverlays = {
    "2012 Distributions": {
        "Ambrosia chamissonis": ambrosia,
        "Atriplex leucophylla": atriplex_l,
        "Calystegia soldanella": calystegia,
        "Cakile maritima": cakile
        },
    "1936 Distributions": {
        "Abronia maritima": pAbroniaM,
        "Abronia umbellata": pAbroniaU,
        "Ambrosia chamissonis": pAmbrosia,
        "Atriplex leucophylla": pAtriplex,
        "Calystegia soldanella": pCalystegia,
        "Carpobrotus spp.": pCarpobrotus
        }
    };

/*L.control.layers(baseLayers, overlays, {
    collapsed: false
    }).addTo(map); */

var layerControl = L.control.groupedLayers(baseLayers, groupedOverlays, {
    collapsed: false
    });
    
map.addControl(layerControl);
</script>
<p>Map overlay data: Open Street Map & Stamen's Watercolor Map.  Proper attribution coming soon. </p>
</section>

<section>
    <h3>References</h3>
    <p>Purer, E.A.  1936.  Studies of certain coastal sand dune plants of Southern California.  <i>Ecological Monorgaphs:</i> 6(1):1-87. </p>
    <p>Tobias, M.M.  2012.  <i>California Beach Plant Biogeography: Biogeomorphology and Ecological Succession, Effects of Foot-Traffic Concentration, and Low-Altitude Aerial Photography.</i>  Dissertation.  University of California, Davis.  </p>
    
</section>
</body>
</html>