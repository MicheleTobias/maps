<!DOCTYPE html>
<html>
<head>
 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
 <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
  <script src="js/leaflet.groupedlayercontrol.js" type="text/javascript"></script>
 
<!-- Layers To Load --> 
 <script src="js/TD_display.js" type="text/javascript"></script>
 <script src="js/PD.js" type="text/javascript"></script>


 
 
<style>
#map { height: 600px; }

p {
    color: black;
    text-align: center;
}


</style>

<title>CA Beach Vegetation Map</title>

</head>

<body>

<p><b>California Beach Plant Species Distributions</b></p>
<p>Distribution information is based on field work described in Tobias 2012 and Purer 1936</p>

<div id="map"></div>
 
<script type="text/javascript">

// set the display colors for the point overlays
function getColor(d) {
    return d > 0 ? '#e6550d':
                   '#e6f5c9';
}

// set the display colors for the polygon overlays
function getColorPoly(d) {
    return d > 0 ? '#a6d854': //'#d01c8b' :
                   '#e6f5c9';
}

// make the map
var map = L.map('map', {
    center:[37, -119.5], 
    zoom: 6
    });

// *** TOBIAS DISTRIBUTIONS ***



// ABRONIA LATIFOLIA "ABRONIA_LA" 

// ABRONIA MARITIMA "ABRONIA_MA"

// ABRONIA UMBELLATA "ABRONIA_UM"

// AMBROSIA CHAMISSONIS
var ambrosia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.AMBROSIA_C),
            fillOpacity: 1
            });
    }
}).addTo(ambrosia);
    
// AMMOPHILA ARENARIA "AMMOPHILA_"

// ARTEMISIA PYCNOCEPHALA "ARTEMISIA_"

// ATRIPLEX LEUCOPHYLLA
var atriplex_l = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ATRIPLEX_L),
            fillOpacity: 1
            });
    }
}).addTo(atriplex_l);

// CALYSTEGIA SOLDANELLA
var calystegia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CALYSTEGIA),
            fillOpacity: 1
            });
    }
}).addTo(calystegia);

// CAKILE MARITIMA
var cakile = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CAKILE_MAR),
            fillOpacity: 1
            });
    }
}).addTo(cakile);

// CAMISSONIA CHEIRANTHIFOLIA "CAMISSONIA"

// ***PURER'S DISTRIBUTIONS***

// ABRONIA MARITIMA
var pAbroniaM = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ABRONIAMAR),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAbroniaM);

// ABRONIA UMBELLATA
var pAbroniaU = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ABRONIAUMBE),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAbroniaU);

// AMBROSIA CHAMISSONIS
var pAmbrosia = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.AMBROSIACH),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAmbrosia);

// ATRIPLEX LEUCOPHYLLA
var pAtriplex = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ATRIPLEXLE),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAtriplex);

// CALYSTEGIA SOLDANELLA
var pCalystegia = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.CALYSTEGIA),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pCalystegia);
    
//CARPOBROTUS SPP.
var pCarpobrotus = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.CARPOBROTU),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pCarpobrotus);

// CROTON CALIFORNICUS "CROTON_CAL"

// DISTICHLIS SPICATA "DISTICHLIS"  --> hold off on this one?

// GLEHNIA LITTORALIS "GLEHNIA_LI"

// HELIOTROPIUM CURASSIVICUM "HELIOTROPI"

// LATHYRUS LITTORALIS "LATHYRUS_L"

// LEYMUS MOLLIS "LEYMUS_MOL"

// TETRAGONIA TETROGONOIDES "TETRAGONIA"
 
// Add the Base Layers (tiles)
var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);
var watercolor = L.tileLayer('http://b.tile.stamen.com/watercolor/{z}/{x}/{y}.png').addTo(map);

var baseLayers = {
"OSM": osm,
"Watercolor": watercolor
};

/*
var overlays = {
//"Markers": marker,
"Atriplex leucophylla": atriplex_l,
"Cakile maritima": cakile 
}; */

// add the overlays and put them in groups
var groupedOverlays = {
    "2012 Distributions": {
        "Ambrosia chamissonis": ambrosia,
        "Atriplex leucophylla": atriplex_l,
        "Calystegia soldanella": calystegia,
        "Cakile maritima": cakile
        },
    "1936 Distributions": {
        "Abronia maritima": pAbroniaM,
        "Abronia umbellata": pAbroniaU,
        "Ambrosia chamissonis": pAmbrosia,
        "Atriplex leucophylla": pAtriplex,
        "Calystegia soldanella": pCalystegia,
        "Carpobrotus spp.": pCarpobrotus
        }
    };

/*L.control.layers(baseLayers, overlays, {
    collapsed: false
    }).addTo(map); */

var layerControl = L.control.groupedLayers(baseLayers, groupedOverlays, {
    collapsed: false
    });
    
map.addControl(layerControl);
</script>

</body>
</html>