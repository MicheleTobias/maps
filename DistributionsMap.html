<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
 <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
  <script src="js/leaflet.groupedlayercontrol.js" type="text/javascript"></script>
 
<!-- Layers To Load --> 
 <script src="js/TD_display.js" type="text/javascript"></script>
 <script src="js/PD.js" type="text/javascript"></script>


 
 
<style>
#map { height: 650px; width: 260px; margin-right: 5px; }
#map2 { height: 650px; width: 260px; margin-right: 5px;}
#map3 { height: 650px; width: 260px;}
#attribution {
  font: 12px/1.5 Lato, "Helvetica Neue", Helvetica, Arial, sans-serif;
  color: #555;}



</style>

<title>CA Beach Vegetation Map</title>

</head>

<body>

<div class="wrapper">

<header>
    <img src="images/Logo_Squares_500x488px.png" alt="Tobias Research Logo" style="float:left; padding: 10px; width:100px;height:100px">
    <h1>California Beach Plant</h1> 
    <h1>Species Distributions</h1>
    <p>Distribution information is based on field work described in Tobias 2012 and Purer 1936</p>
    
    <p class="view"><a href="https://github.com/MicheleTobias/maps">View the Project on GitHub <small>MicheleTobias/maps</small></a></p>
        <ul>
          <li><a href="https://github.com/MicheleTobias/maps">Project On <strong>GitHub</strong></a></li>
          <li><a href="https://sites.google.com/site/mtobiasresearch/">Research <strong>Website</strong></a></li>
        </ul>
        
</header>

<section>
<h3>Introduction</h3>
<p>The distribution of species can change over time.  This map shows the locations of common beach plant species described in studies published in the academic literature.  The support (point or aerial representation) is based on the description by the original author. </p>
<p>That's not all!  There is more data coming soon!  Data from at least two more published studies are in the process of being digitized.  Incorporating those will require changes to the web map's layer controls, so expect big changes coming.</p>
</section>

<section>
<h3>How To Use the Map</h3>
<p>I recommend showing only one layer from each section at a time.  Since the points and polygons are the same for each species in each group, the most recently selected layer will block any previously selected layer.  For now, select one 1936 distribution first, then pick a 2012 distribution so the points will sit on top of the polygons.  This will hopefully be fixed in an update soon.</p>
</section>

<section>
<!--Info on making 3 divs next to e/o: http://stackoverflow.com/questions/20179154/html-and-css-how-can-i-align-3-divs-side-by-side -->
<p class = "view">
<div id="map" style="float:left"></div>

<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="js/leaflet.groupedlayercontrol.js"></script>
<script type="text/javascript">

// set the display colors for the point overlays
function getColor(d) {
    return d > 0 ? '#e6550d':
                   '#e6f5c9';
}

// set the display colors for the polygon overlays
function getColorPoly(d) {
    return d > 0 ? '#a6d854': //'#d01c8b' :
                   '#e6f5c9';
}


 
    



// *** TOBIAS DISTRIBUTIONS ***

// ABRONIA LATIFOLIA "ABRONIA_LA" 
var abronia_l = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ABRONIA_LA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(abronia_l);

// ABRONIA MARITIMA "ABRONIA_MA"
var abronia_m = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ABRONIA_MA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(abronia_m);

// ABRONIA UMBELLATA "ABRONIA_UM"
var abronia_u = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ABRONIA_UM),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(abronia_u);

// AMBROSIA CHAMISSONIS
var ambrosia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.AMBROSIA_C),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(ambrosia);
    
// AMMOPHILA ARENARIA "AMMOPHILA_"
// hold off on this one - observations not representative of actual distribution

// ARTEMISIA PYCNOCEPHALA "ARTEMISIA_"
var artemisia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ARTEMISIA_),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(artemisia);

// ATRIPLEX LEUCOPHYLLA
var atriplex_l = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.ATRIPLEX_L),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(atriplex_l);

// CAKILE MARITIMA
var cakile = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CAKILE_MAR),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(cakile);

// CALYSTEGIA SOLDANELLA
var calystegia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CALYSTEGIA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(calystegia);

// CAMISSONIA CHEIRANTHIFOLIA "CAMISSONIA"
var camissonia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CAMISSONIA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(camissonia);

// CARPOBROTUS SPP. "CARPOBROTU"
var carpobrotus = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CARPOBROTU),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(carpobrotus);

// CROTON CALIFORNICUS "CROTON_CAL"
var croton = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.CROTON_CAL),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(croton);

// DISTICHLIS SPICATA "DISTICHLIS"  
// hold off on this one?

// GLEHNIA LITTORALIS "GLEHNIA_LI"
var glehnia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.GLEHNIA_LI),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(glehnia);

// HELIOTROPIUM CURASSIVICUM "HELIOTROPI"
var heliotropium = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.HELIOTROPI),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(heliotropium);

// LATHYRUS LITTORALIS "LATHYRUS_L"
var lathyrus = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.LATHYRUS_L),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(lathyrus);

// LEYMUS MOLLIS "LEYMUS_MOL"
var leymus = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.LEYMUS_MOL),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(leymus);

/*
// TETRAGONIA TETROGONOIDES "TETRAGONIA"
var tetragonia = new L.LayerGroup();

L.geoJson(TD, {
    pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 3,
            fillColor: getColor(feature.properties.TETRAGONIA),
            fillOpacity: 1
            }).bindPopup(feature.properties.SITE_NAME);
    }
}).addTo(tetragonia);
*/

// ---------------------------
// ---------------------------
// ***PURER'S DISTRIBUTIONS***

// ABRONIA MARITIMA
var pAbroniaM = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ABRONIAMAR),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAbroniaM);

// ABRONIA UMBELLATA
var pAbroniaU = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ABRONIAUMBE),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAbroniaU);

// AMBROSIA CHAMISSONIS
var pAmbrosia = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.AMBROSIACH),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAmbrosia);

// ATRIPLEX LEUCOPHYLLA
var pAtriplex = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.ATRIPLEXLE),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pAtriplex);

// CALYSTEGIA SOLDANELLA
var pCalystegia = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.CALYSTEGIA),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pCalystegia);
    
//CARPOBROTUS SPP.
var pCarpobrotus = new L.LayerGroup();
L.geoJson(PD, {
    style: function (feature) {
    return {
        fillColor: getColorPoly(feature.properties.CARPOBROTU),
        weight: 1,
        opacity: 1,
        color: 'gray',
        fillOpacity: .5
        };
    }}).addTo(pCarpobrotus);


 
// Add the Base Layers (tiles)
var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
var watercolor = L.tileLayer('http://b.tile.stamen.com/watercolor/{z}/{x}/{y}.png');

// make the map
var map = L.map('map', {
    center:[35, -119.5], 
    zoom: 5,
    layers: [watercolor, pAmbrosia, ambrosia]
    });

var baseLayers = {
"OSM": osm,
"Watercolor": watercolor
};


/*
var overlays = {
//"Markers": marker,
"Atriplex leucophylla": atriplex_l,
"Cakile maritima": cakile 
}; */
   
// add the overlays and put them in groups
var groupedOverlays = {
    "1936 Distributions": {
        "Abronia maritima": pAbroniaM,
        "Abronia umbellata": pAbroniaU,
        "Ambrosia chamissonis": pAmbrosia,
        "Atriplex leucophylla": pAtriplex,
        "Calystegia soldanella": pCalystegia,
        "Carpobrotus spp.": pCarpobrotus
        },
    "2012 Distributions": {
        "Abronia latifolia": abronia_l,
        "Abronia maritima": abronia_m,
        "Abronia umbellata": abronia_u,
        "Ambrosia chamissonis": ambrosia,
        "Atriplex leucophylla": atriplex_l,
        "Artemisia pycnocephalla": artemisia,
        "Calystegia soldanella": calystegia,
        "Cakile maritima": cakile,
        "Camissoniopsis cheiranthifolia": camissonia,
        "Carpobrotus spp.": carpobrotus,
        "Croton californicus": croton,
        "Glehnia littoralis": glehnia,
        "Heliotropium curassivicum": heliotropium,
        "Lathyrus littoralis": lathyrus,
        "Elymus mollis": leymus /*,
        "Tetragonia tetrogonoides": tetragonia */
        }
    };

/*L.control.layers(baseLayers, overlays, {
    collapsed: false
    }).addTo(map); */

var options = {
    collapsed: true,
    exclusiveGroups: ["1936 Distributions", "2012 Distributions"] 
    };
    

var layerControl = L.control.groupedLayers(baseLayers, groupedOverlays, options).addTo(map);
    
//map.addControl(layerControl);

</script>

<div id="map2" style="float:left"></div>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="js/leaflet.groupedlayercontrol.js"></script>
<script type="text/javascript">
// make the map
 
// Add the Base Layers (tiles)
var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
var watercolor = L.tileLayer('http://b.tile.stamen.com/watercolor/{z}/{x}/{y}.png');

var map = L.map('map2', {
    center:[35, -119.5], 
    zoom: 5,
    layers: [watercolor]
    });


var baseLayers = {
"OSM": osm,
"Watercolor": watercolor
};
</script>
<div id="map3"></div>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="js/leaflet.groupedlayercontrol.js"></script>
<script type="text/javascript">
// make the map
 
// Add the Base Layers (tiles)
var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
var watercolor = L.tileLayer('http://b.tile.stamen.com/watercolor/{z}/{x}/{y}.png');

var map = L.map('map3', {
    center:[35, -119.5], 
    zoom: 5,
    layers: [watercolor]
    });


var baseLayers = {
"OSM": osm,
"Watercolor": watercolor
};
</script>
</p>

<p id="attribution">Watercolor Tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.  OSM Tiles by <a href="http://www.openstreetmap.org">Open Street Map</a> under <a href="http://creativecommons.org/licenses/by-sa/2.0/">  Creative Commons Attribution-ShareAlike 2.0 license (CC BY-SA). </a>Data by <a href="http://opendatacommons.org/licenses/odbl/"> Open Data Commons Open Database License (ODbL)</a>. </p>

</section>

<section>
    <h3>References</h3>
    <p id="citation">Barbour, M. G., de Jong, T. M., & Johnson, A. F. 1976. Synecology of beach vegetation along the Pacific Coast of the United States of America: A first approximation. Journal of Biogeography, 3, 55–69. </p>
    <p id="citation">Cooper, W. S. 1936. The strand and dune Flora of the Pacific Coast of North America: A geographic study. In T. H. Goodspeed (Ed.), Essays in geobotany in honor of William Albert Setchell (pp. 141–187). Berkeley, CA: University of California Press.</p>
    <p id="citation">Purer, E.A.  1936.  Studies of certain coastal sand dune plants of Southern California.  <i>Ecological Monorgaphs:</i> 6(1):1-87. </p>
    <p id="citation">Tobias, M.M.  2012.  <i>California Beach Plant Biogeography: Biogeomorphology and Ecological Succession, Effects of Foot-Traffic Concentration, and Low-Altitude Aerial Photography.</i>  Dissertation.  University of California, Davis.  </p>
    

</section>
</body>
</html>